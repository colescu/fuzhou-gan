import{d as h,Q as k,R as y,r as E,D as c,ar as d,k as L,o as b,u as f,ax as A,a_ as B,w as g,z as m,h as M}from"./app-xu_rIrQu.js";function P(){return/Mobi|Android/i.test(navigator.userAgent)}const I=h({__name:"ConstrainedPopover",props:k({trigger:{default:"manual"}},{show:{type:Boolean,default:!1},showModifiers:{}}),emits:["update:show"],setup(l){const o=y(l,"show"),n=E(null),v=[".n-popover",".n-float-button",".popover-target"];async function u(t){const e=t.target;n.value?.contains(e)?(o.value=!o.value,t.stopPropagation()):v.some(r=>Array.from(document.querySelectorAll(r)).some(i=>i.contains(e)))||(o.value=!1)}l.trigger==="manual"&&(c(()=>{document.addEventListener("click",u,!0)}),d(()=>{document.removeEventListener("click",u,!0)}));function p(t){const e=t.getBoundingClientRect();if(e.bottom<0||e.top>window.innerHeight||e.right<0||e.left>window.innerWidth)return!1;const r=e.left+e.width/2,i=e.top+e.height/2,a=document.elementFromPoint(r,i);return Array.from(document.querySelectorAll(".n-popover")).some(w=>w.contains(a))?!0:a===t||t.contains(a)}function s(){n.value&&(p(n.value)||(o.value=!1))}return c(()=>{window.addEventListener("scroll",s,!0),window.addEventListener("resize",s)}),d(()=>{window.removeEventListener("scroll",s,!0),window.removeEventListener("resize",s)}),(t,e)=>(b(),L(f(A),B({show:o.value,"onUpdate:show":e[0]||(e[0]=r=>o.value=r),trigger:t.trigger==="hover"&&f(P)()?"click":t.trigger},t.$attrs),{trigger:g(()=>[M("span",{ref_key:"target",ref:n,class:"popover-target"},[m(t.$slots,"trigger")],512)]),default:g(()=>[m(t.$slots,"default")]),_:3},16,["show","trigger"]))}});export{I as _};
