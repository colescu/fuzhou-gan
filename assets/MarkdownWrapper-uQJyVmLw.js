import{g as u,a as p}from"./table-BHpxoyAt.js";import{d as m,r as h,D as E,ar as N,c as _,o as T,z as g,a_ as C}from"./app-xu_rIrQu.js";const k=m({__name:"MarkdownWrapper",setup(w){function i(t){if(t.nodeType===Node.TEXT_NODE){const r=t.textContent??"";"=≠≈≉".split("").forEach(e=>{if(r.includes(e)){const n=document.createDocumentFragment();r.split(e).forEach((o,f,l)=>{if(o&&n.appendChild(document.createTextNode(o)),f<l.length-1){const a=document.createElement("span");a.className="operator",a.textContent=e,n.appendChild(a)}}),t.parentNode?.replaceChild(n,t)}})}else t.nodeType===Node.ELEMENT_NODE&&!t.closest("code, pre, .operator")&&t.childNodes.forEach(i)}function d(t){(t instanceof Element||t instanceof Document)&&t.querySelectorAll("table").forEach(e=>{const n=e.parentNode;if(n&&n instanceof Element&&!n.classList.contains("scrollable")){const o=document.createElement("div");o.className="scrollable",e.parentNode.insertBefore(o,e),o.appendChild(e)}if(u(e).forEach(o=>{p(o,"拼音","pinyin"),p(o,"音標","ipa")}),e.hasAttribute("header-columns")){const o=u(e);Array.from({length:Number(e.getAttribute("header-columns"))}).forEach((f,l)=>{o[l].forEach(a=>{a.classList.add("table-header")})})}}),i(t);const r=document.createTreeWalker(t,NodeFilter.SHOW_TEXT,null);for(;r.nextNode();){const e=r.currentNode;e.nodeValue&&(e.nodeValue=e.nodeValue.replace(/ (，|。|、|；)/g," $1"))}}const c=h(null);let s=null;return E(()=>{c.value&&(d(c.value),s=new MutationObserver(t=>{for(const r of t)r.addedNodes.forEach(e=>{e instanceof HTMLElement&&e.classList.contains("v-binder-follower-container")&&e.querySelectorAll(".footnote").length>0&&d(e)})}),s.observe(document.body,{childList:!0,subtree:!0}))}),N(()=>{s&&s.disconnect()}),(t,r)=>(T(),_("div",C({ref_key:"root",ref:c,class:"markdown-wrapper"},t.$attrs),[g(t.$slots,"default")],16))}});export{k as default};
