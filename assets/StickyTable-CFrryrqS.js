import{d as S,c as y,o as E,a as V,r as k,D as Y,E as N,ar as D,G as z,h as d,W as T,V as M,g as L,z as q,u as g,w as F,x as $,$ as A,X as I,B as O,_ as W}from"./app-xu_rIrQu.js";import{g as G}from"./table-BHpxoyAt.js";const R={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},U=S({name:"Expand",render:function(v,n){return E(),y("svg",R,n[0]||(n[0]=[V('<path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M432 320v112H320"></path><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M421.8 421.77L304 304"></path><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M80 192V80h112"></path><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M90.2 90.23L208 208"></path><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M320 80h112v112"></path><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M421.77 90.2L304 208"></path><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M192 432H80V320"></path><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M90.23 421.8L208 304"></path>',8)]))}}),X=S({__name:"StickyTable",props:{n:{default:1}},setup(h){function v(e,t){const r=G(e);r.forEach((l,u)=>{u===0&&l.forEach(a=>{a.style.borderLeft="none"}),u===r.length-1&&l.forEach(a=>{a.style.borderRight="none"})});const s=r.slice(0,t),B=s.map(l=>l[0].offsetWidth);s.forEach((l,u)=>{const a=B.slice(0,u).reduce((m,w)=>m+w,0);l.forEach((m,w)=>{Object.assign(m.style,{position:"sticky",left:a+"px",zIndex:w===0?7:6})})})}const n=k(null);let f=null;Y(()=>{n.value&&(v(n.value,h.n),f=new MutationObserver(async()=>{await N(),n.value&&v(n.value,h.n)}),f.observe(n.value,{childList:!0,subtree:!0}))}),D(()=>{f?.disconnect()});const p=k(window.innerHeight*.6),_=window.innerHeight*.3,j=window.innerHeight*.9;let x=0,b=0;const C=e=>{x=e instanceof MouseEvent?e.clientY:e.touches[0].clientY,b=p.value,window.addEventListener("mousemove",i),window.addEventListener("mouseup",c),window.addEventListener("touchmove",i,{passive:!1}),window.addEventListener("touchend",c)},i=e=>{e.preventDefault();const r=(e instanceof MouseEvent?e.clientY:e.touches[0].clientY)-x;p.value=Math.min(j,Math.max(_,b+r))},c=()=>{window.removeEventListener("mousemove",i),window.removeEventListener("mouseup",c),window.removeEventListener("touchmove",i),window.removeEventListener("touchend",c)},o=k(!1);function H(){o.value=!o.value}return document.addEventListener("click",e=>{const t=e.target;if(["n-popover","n-float-button"].map(s=>Array.from(document.querySelectorAll(`.${s}`))).flat().some(s=>s.contains(t)))return;const r=document.querySelector(".sticky-row-column");r&&!r.contains(t)&&(o.value=!1)}),z(o,e=>{const t=document.querySelector(".fullscreen-overlay");t.style.display=e?"block":"none"}),(e,t)=>(E(),y("div",null,[d("div",{class:$(["center",{fullscreen:o.value}]),style:M([{"max-width":"fit-content"},o.value?{}:{position:"relative",margin:"2em auto"}])},[d("div",{class:"sticky-row-column",style:M(o.value?{}:{height:p.value+"px"})},[d("table",{ref_key:"table",ref:n},[q(e.$slots,"default",{},void 0,!0)],512),L(g(O),{class:"fullscreen-toggle",onClick:H,text:""},{default:F(()=>[L(g(I),{component:g(U)},null,8,["component"])]),_:1})],4)],6),o.value?T("",!0):(E(),y("div",{key:0,class:"handle",onMousedown:C,onTouchstart:A(C,["prevent"])},null,32)),t[0]||(t[0]=d("div",{class:"fullscreen-overlay"},".",-1))]))}}),P=W(X,[["__scopeId","data-v-5a06bf25"]]);export{P as S};
